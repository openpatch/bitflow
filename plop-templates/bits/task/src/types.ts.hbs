import { Action as BaseAction, TaskBit as TaskBitBase } from "@bitflow/core";
import { z } from "zod";
import {
  AnswerSchema,
  ResultSchema,
  StatisticSchema,
  TaskSchema,
} from "./schemas";

export type ITaskState = {
  yes: boolean;
};

export type ITask = z.infer<typeof TaskSchema>;

export type IAnswer = z.infer<typeof AnswerSchema>;

export type IResult = z.infer<typeof ResultSchema>;

export type IStatistic = z.infer<typeof StatisticSchema>;

export interface IYesAction extends BaseAction {
  type: "yes";
}

export interface INoAction extends BaseAction {
  type: "no";
}

export interface IAnswerAction extends BaseAction {
  type: "answer";
  payload: {
    answer: IAnswer;
  };
}

export type IAction = IYesAction | INoAction | IAnswerAction;

export type TaskBit = TaskBitBase<ITask, IAnswer, IResult, IStatistic, IAction>;
